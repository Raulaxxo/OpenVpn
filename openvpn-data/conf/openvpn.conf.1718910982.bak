server 10.16.48.0 255.255.255.0
verb 4
key /etc/openvpn/pki/private/vpn-aws.netred.cl.key
ca /etc/openvpn/pki/ca.crt
cert /etc/openvpn/pki/issued/vpn-aws.netred.cl.crt
dh /etc/openvpn/pki/dh.pem
tls-auth /etc/openvpn/pki/ta.key
key-direction 0
keepalive 10 60
persist-key
persist-tun
topology subnet
#data-ciphers-fallback BF-CBC
#tun-mtu 1500
#push "tun-mtu 1500"

# Rely on Docker to do port mapping, internally always 1194
proto udp
port 1194

dev tun0

### Logs
status /etc/openvpn/log/openvpn-status.log
log /etc/openvpn/log/openvpn.log

user nobody
group nogroup

### compresion
comp-lzo no
push "comp-lzo no"
#compress
#push "compress"

### DNS bloqueo para openvpn windows
#push "block-outside-dns"

### DNS
allow-pull-fqdn
#push "dhcp-option DNS 172.31.3.141"
#push "route 172.31.3.141 255.255.255.255"


# Maintain a record of client <-> virtual IP address
# associations in this file.  If OpenVPN goes down or
# is restarted, reconnecting clients can be assigned
# the same virtual IP address from the pool that was
# previously assigned.
ifconfig-pool-persist /etc/openvpn/log/ipp.txt

### Debo dejar fuera de este ruteo la ip publica del servidor donde esta la VPN
#push "route 50.19.174.248 255.255.255.255 net_gateway"


### No permitir que todo el trafico se vaya por la vpn , solo las reglas push que se han colocado
#route-nopull
#push "route 0.0.0.0 0.0.0.0 net_gateway"

### CONFIGURACION DE USUARIOS
client-config-dir /etc/openvpn/ccd

### Rutas de VPN
push "route 10.16.48.0 255.255.255.0"

### IP Privada del servidor de la VPN
#push "route 172.31.81.161 255.255.255.255"



